{% extends "base.html" %}
{% load static %}

{% block title %}airways - Dashboard Principal{% endblock %}

{% block content %}
<div id="welcomeModal" class="modal-overlay">
    <div class="modal-content glass-modal">
        <span class="close-x" onclick="closeModal()">&times;</span>
        <div class="modal-scroll-area">
            <h3 class="modal-title-simple">SEJA BEM-VINDO</h3>
            <p class="modal-text-simple">PARA OBTER INFORMAÇÕES E SUPORTE ENTRE NO GRUPO DO WHATSAPP.</p>
            
            <a href="{{ whatsapp_link }}" target="_blank" class="btn-whatsapp-link">
                <i class="fa-brands fa-whatsapp"></i> ENTRAR NO GRUPO
            </a>
            
            <button class="btn-just-close" onclick="closeModal()">FECHAR</button>
        </div>
    </div>
</div>

<div class="forex-dashboard">
    <div class="carousel-container">
        <div class="carousel-slider" id="slider">
            <div class="slide"><img src="{% static 'images/banner1.jpg' %}" alt="Banner 1"></div>
            <div class="slide"><img src="{% static 'images/banner2.jpg' %}" alt="Banner 2"></div>
            <div class="slide"><img src="{% static 'images/banner3.jpg' %}" alt="Banner 3"></div>
            <div class="slide"><img src="{% static 'images/banner4.jpg' %}" alt="Banner 4"></div>
            <div class="slide"><img src="{% static 'images/banner5.jpg' %}" alt="Banner 5"></div>
        </div>
        <div class="carousel-dots" id="dots"></div>
    </div>

    <div class="marquee-wrapper">
        <div class="marquee-content">
            <i class="fa-solid fa-plane-up"></i> Qatar Airways: Frequentemente eleita a melhor companhia aérea do mundo. É conhecida pelo luxo extremo e por conectar o ocidente ao oriente via Doha.
        </div>
    </div>

    <div class="action-grid">
        <a href="{% url 'deposito' %}" class="action-btn">
            <div class="icon-box bg-glow"><i class="fa-solid fa-vault"></i></div>
            <span class="btn-label">Depósito</span>
        </a>
        <a href="{% url 'tarefa' %}" class="action-btn">
            <div class="icon-box bg-glow"><i class="fa-solid fa-rocket"></i></div>
            <span class="btn-label">Missão</span>
        </a>
        <a href="{% url 'roleta' %}" class="action-btn">
            <div class="icon-box bg-glow"><i class="fa-solid fa-dharmachakra"></i></div>
            <span class="btn-label">Roleta</span>
        </a>
        <a href="{% url 'renda' %}" class="action-btn">
            <div class="icon-box bg-glow"><i class="fa-solid fa-gem"></i></div>
            <span class="btn-label">Renda</span>
        </a>
    </div>

    <div class="brand-info-section">
        <p>Negociações Inteligentes <span>•</span> Airways Terminal</p>
    </div>
</div>

<nav class="trading-nav">
    <a href="{% url 'home' %}" class="nav-link active">
        <i class="fa-solid fa-house-user"></i>
        <span>Início</span>
    </a>
    <a href="{% url 'nivel' %}" class="nav-link">
        <i class="fa-solid fa-award"></i>
        <span>Nível</span>
    </a>
    <a href="{% url 'saque' %}" class="nav-link">
        <i class="fa-solid fa-wallet"></i> 
        <span>Saque</span>
    </a>
    <a href="{% url 'equipa' %}" class="nav-link">
        <i class="fa-solid fa-users-rays"></i>
        <span>Equipa</span>
    </a>
    <a href="{% url 'perfil' %}" class="nav-link">
        <i class="fa-solid fa-id-card-clip"></i>
        <span>Perfil</span>
    </a>
</nav>

<style>
    :root {
        --primary-green: #00c853;
        --bright-grey: #e0e0e0;
        --glow-color: rgba(255, 255, 255, 0.4);
    }

    body {
        background: url("{% static 'images/background_airways.jpg' %}") center center fixed;
        background-size: cover;
        margin: 0;
        font-family: 'Poppins', sans-serif;
        color: white;
        padding-bottom: 90px;
    }

    /* CARROSSEL */
    .carousel-container {
        width: 100%; height: 180px; position: relative; overflow: hidden;
        box-shadow: 0 8px 15px rgba(0,0,0,0.4);
    }
    .carousel-slider { display: flex; width: 500%; height: 100%; transition: transform 0.8s ease; }
    .slide { width: 20%; height: 100%; }
    .slide img { width: 100%; height: 100%; object-fit: cover; }
    .carousel-dots { position: absolute; bottom: 8px; width: 100%; display: flex; justify-content: center; gap: 5px; }
    .dot { width: 6px; height: 6px; background: rgba(255,255,255,0.3); border-radius: 50%; }
    .dot.active { background: var(--primary-green); width: 15px; border-radius: 10px; }

    /* LETREIRO */
    .marquee-wrapper { background: rgba(0, 0, 0, 0.6); padding: 10px 0; margin-bottom: 15px; overflow: hidden; white-space: nowrap; }
    .marquee-content { display: inline-block; padding-left: 100%; animation: marquee 25s linear infinite; font-size: 13px; color: #fff; }
    @keyframes marquee { 0% { transform: translate(0, 0); } 100% { transform: translate(-100%, 0); } }

    /* BOTÕES COM BRILHO CINZA ACESO */
    .action-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; padding: 0 12px; }
    .action-btn { text-decoration: none; display: flex; flex-direction: column; align-items: center; gap: 8px; }
    .icon-box.bg-glow { 
        width: 52px; 
        height: 52px; 
        border-radius: 14px; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        font-size: 20px; 
        background: var(--bright-grey); 
        color: #333;
        box-shadow: 0 0 15px var(--glow-color);
        border: 1px solid #fff;
    }
    .btn-label { font-size: 11px; font-weight: 700; color: #ffffff; text-shadow: 1px 1px 2px #000; text-transform: uppercase; }

    /* MODAL GLASSMORPHISM (EFEITO VIDRO) */
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; z-index: 2000; }
    .glass-modal { 
        background: rgba(255, 255, 255, 0.2); 
        backdrop-filter: blur(15px); 
        -webkit-backdrop-filter: blur(15px);
        width: 250px; 
        max-height: 320px; 
        padding: 20px; 
        border-radius: 25px; 
        text-align: center; 
        color: white; 
        position: relative;
        border: 1px solid rgba(255, 255, 255, 0.3); 
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        overflow: hidden;
    }
    .modal-scroll-area {
        max-height: 280px;
        overflow-y: auto;
        padding-right: 5px;
    }
    .close-x { position: absolute; top: 10px; right: 15px; font-size: 20px; font-weight: bold; cursor: pointer; color: rgba(255,255,255,0.7); z-index: 10; }
    .modal-title-simple { font-size: 16px; font-weight: 800; margin-bottom: 10px; color: #fff; letter-spacing: 1px; }
    .modal-text-simple { font-size: 12px; margin-bottom: 15px; line-height: 1.4; color: rgba(255,255,255,0.9); }
    
    .btn-whatsapp-link {
        display: flex; align-items: center; justify-content: center; gap: 8px;
        background: #25D366; color: white; text-decoration: none;
        padding: 12px; border-radius: 12px; font-weight: 700; font-size: 13px; margin-bottom: 10px;
        box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
        transition: transform 0.2s;
    }
    .btn-whatsapp-link:active { transform: scale(0.95); }

    .btn-just-close {
        background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); width: 100%; padding: 10px; border-radius: 12px;
        color: #fff; font-weight: 600; cursor: pointer; font-size: 11px;
    }

    /* NAV */
    .trading-nav { position: fixed; bottom: 0; width: 100%; height: 65px; background: #0a0f14; display: flex; justify-content: space-around; align-items: center; z-index: 1000; }
    .nav-link { text-decoration: none; color: #888; display: flex; flex-direction: column; align-items: center; }
    .nav-link.active { color: var(--primary-green); }
    .nav-link span { font-size: 10px; font-weight: 600; }
    .brand-info-section { margin-top: 30px; text-align: center; font-size: 11px; opacity: 0.7; }

    /* Custom Scrollbar */
    .modal-scroll-area::-webkit-scrollbar { width: 3px; }
    .modal-scroll-area::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 10px; }
</style>

<script>
    function closeModal() { document.getElementById('welcomeModal').style.display = 'none'; }

    // Slider Logic
    const slider = document.getElementById('slider');
    const dotsContainer = document.getElementById('dots');
    let currentIndex = 0;
    const totalSlides = 5;

    for (let i = 0; i < totalSlides; i++) {
        const dot = document.createElement('div');
        dot.classList.add('dot');
        if (i === 0) dot.classList.add('active');
        dotsContainer.appendChild(dot);
    }
    const dots = document.querySelectorAll('.dot');

    setInterval(() => {
        currentIndex = (currentIndex + 1) % totalSlides;
        slider.style.transform = `translateX(-${currentIndex * 20}%)`;
        dots.forEach(dot => dot.classList.remove('active'));
        dots[currentIndex].classList.add('active');
    }, 5000);
</script>
{% endblock %}
